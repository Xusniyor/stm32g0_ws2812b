ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.arch armv6s-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32_uart_dma.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.stm32_uart_dma_init,"ax",%progbits
  18              		.align	1
  19              		.global	stm32_uart_dma_init
  20              		.syntax unified
  21              		.code	16
  22              		.thumb_func
  24              	stm32_uart_dma_init:
  25              	.LVL0:
  26              	.LFB297:
  27              		.file 1 "stm32_uart_dma.c"
   1:stm32_uart_dma.c **** /**
   2:stm32_uart_dma.c ****   ******************************************************************************
   3:stm32_uart_dma.c ****   * @file           : stm32_uart_dma.c
   4:stm32_uart_dma.c ****   * @brief          : 
   5:stm32_uart_dma.c ****   ******************************************************************************
   6:stm32_uart_dma.c ****   * @attention
   7:stm32_uart_dma.c ****   * eslatma!! bu kutubxona faqat OS dan tashqarida ishlatishga mo`ljalangan 
   8:stm32_uart_dma.c ****   * agar siz OS bilan ishlatmoqchi bo`lsangiz unga o`zgartirishlar kiritishingiz kerak
   9:stm32_uart_dma.c ****   ******************************************************************************
  10:stm32_uart_dma.c ****   */
  11:stm32_uart_dma.c **** #include "stm32_uart_dma.h"
  12:stm32_uart_dma.c **** #include <stdlib.h>
  13:stm32_uart_dma.c **** 
  14:stm32_uart_dma.c **** uint16_t __find, __last_find;
  15:stm32_uart_dma.c **** 
  16:stm32_uart_dma.c **** stm32_uart_dma_state stm32_uart_dma_init(stm32_uart_dma *hobj, void(*rxcallback))
  17:stm32_uart_dma.c **** {
  28              		.loc 1 17 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 17 1 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 0400     		movs	r4, r0
  18:stm32_uart_dma.c ****     hobj->rxcallback = rxcallback;
  39              		.loc 1 18 5 is_stmt 1 view .LVU2
  40              		.loc 1 18 22 is_stmt 0 view .LVU3
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 2


  41 0004 4161     		str	r1, [r0, #20]
  19:stm32_uart_dma.c ****     hobj->rxbuf = (uint8_t *)malloc(hobj->rxbuf_max_size * sizeof(uint8_t));
  42              		.loc 1 19 5 is_stmt 1 view .LVU4
  43              		.loc 1 19 41 is_stmt 0 view .LVU5
  44 0006 8088     		ldrh	r0, [r0, #4]
  45              	.LVL1:
  46              		.loc 1 19 30 view .LVU6
  47 0008 FFF7FEFF 		bl	malloc
  48              	.LVL2:
  49              		.loc 1 19 17 view .LVU7
  50 000c 2060     		str	r0, [r4]
  20:stm32_uart_dma.c ****     HAL_GPIO_WritePin(hobj->de_gpio, hobj->de_pin, GPIO_PIN_RESET);
  51              		.loc 1 20 5 is_stmt 1 view .LVU8
  52 000e 218A     		ldrh	r1, [r4, #16]
  53 0010 0022     		movs	r2, #0
  54 0012 E068     		ldr	r0, [r4, #12]
  55 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL3:
  21:stm32_uart_dma.c ****     HAL_UART_Receive_DMA(hobj->uart, hobj->rxbuf, hobj->rxbuf_max_size);
  57              		.loc 1 21 5 view .LVU9
  58 0018 A288     		ldrh	r2, [r4, #4]
  59 001a 2168     		ldr	r1, [r4]
  60 001c A068     		ldr	r0, [r4, #8]
  61 001e FFF7FEFF 		bl	HAL_UART_Receive_DMA
  62              	.LVL4:
  22:stm32_uart_dma.c ****     return STM32_UART_DMA_OK;
  63              		.loc 1 22 5 view .LVU10
  23:stm32_uart_dma.c **** }
  64              		.loc 1 23 1 is_stmt 0 view .LVU11
  65 0022 0020     		movs	r0, #0
  66              		@ sp needed
  67              	.LVL5:
  68              		.loc 1 23 1 view .LVU12
  69 0024 10BD     		pop	{r4, pc}
  70              		.cfi_endproc
  71              	.LFE297:
  73              		.section	.text.stm32_uart_dma_loop,"ax",%progbits
  74              		.align	1
  75              		.global	stm32_uart_dma_loop
  76              		.syntax unified
  77              		.code	16
  78              		.thumb_func
  80              	stm32_uart_dma_loop:
  81              	.LVL6:
  82              	.LFB298:
  24:stm32_uart_dma.c **** stm32_uart_dma_state stm32_uart_dma_loop(stm32_uart_dma *hobj)
  25:stm32_uart_dma.c **** {
  83              		.loc 1 25 1 is_stmt 1 view -0
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 0, uses_anonymous_args = 0
  87              		.loc 1 25 1 is_stmt 0 view .LVU14
  88 0000 70B5     		push	{r4, r5, r6, lr}
  89              	.LCFI1:
  90              		.cfi_def_cfa_offset 16
  91              		.cfi_offset 4, -16
  92              		.cfi_offset 5, -12
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 3


  93              		.cfi_offset 6, -8
  94              		.cfi_offset 14, -4
  95 0002 0400     		movs	r4, r0
  26:stm32_uart_dma.c ****     __find = __HAL_DMA_GET_COUNTER(hobj->uart->hdmarx);
  96              		.loc 1 26 5 is_stmt 1 view .LVU15
  97              		.loc 1 26 14 is_stmt 0 view .LVU16
  98 0004 8368     		ldr	r3, [r0, #8]
  99 0006 DB6F     		ldr	r3, [r3, #124]
 100 0008 1B68     		ldr	r3, [r3]
 101 000a 5B68     		ldr	r3, [r3, #4]
 102              		.loc 1 26 12 view .LVU17
 103 000c 9BB2     		uxth	r3, r3
 104 000e 134A     		ldr	r2, .L5
 105 0010 1380     		strh	r3, [r2]
  27:stm32_uart_dma.c ****     if (__find != hobj->rxbuf_max_size)
 106              		.loc 1 27 5 is_stmt 1 view .LVU18
 107              		.loc 1 27 23 is_stmt 0 view .LVU19
 108 0012 8288     		ldrh	r2, [r0, #4]
 109              		.loc 1 27 8 view .LVU20
 110 0014 9342     		cmp	r3, r2
 111 0016 01D1     		bne	.L4
 112              	.LVL7:
 113              	.L3:
  28:stm32_uart_dma.c ****     {
  29:stm32_uart_dma.c ****         __last_find = __find;
  30:stm32_uart_dma.c ****         HAL_Delay(10);
  31:stm32_uart_dma.c ****         __find = __HAL_DMA_GET_COUNTER(hobj->uart->hdmarx);
  32:stm32_uart_dma.c ****         if (__last_find != __find)
  33:stm32_uart_dma.c ****             return STM32_UART_DMA_OK;
  34:stm32_uart_dma.c ****         HAL_UART_Abort(hobj->uart);
  35:stm32_uart_dma.c ****         hobj->rxcallback(hobj->rxbuf, hobj->rxbuf_max_size - __find);
  36:stm32_uart_dma.c ****         HAL_UART_Receive_DMA(hobj->uart, hobj->rxbuf, hobj->rxbuf_max_size);
  37:stm32_uart_dma.c ****     }
  38:stm32_uart_dma.c ****     return STM32_UART_DMA_OK;
  39:stm32_uart_dma.c **** }
 114              		.loc 1 39 1 view .LVU21
 115 0018 0020     		movs	r0, #0
 116              		@ sp needed
 117              	.LVL8:
 118              		.loc 1 39 1 view .LVU22
 119 001a 70BD     		pop	{r4, r5, r6, pc}
 120              	.LVL9:
 121              	.L4:
  29:stm32_uart_dma.c ****         HAL_Delay(10);
 122              		.loc 1 29 9 is_stmt 1 view .LVU23
  29:stm32_uart_dma.c ****         HAL_Delay(10);
 123              		.loc 1 29 21 is_stmt 0 view .LVU24
 124 001c 104D     		ldr	r5, .L5+4
 125 001e 2B80     		strh	r3, [r5]
  30:stm32_uart_dma.c ****         __find = __HAL_DMA_GET_COUNTER(hobj->uart->hdmarx);
 126              		.loc 1 30 9 is_stmt 1 view .LVU25
 127 0020 0A20     		movs	r0, #10
 128              	.LVL10:
  30:stm32_uart_dma.c ****         __find = __HAL_DMA_GET_COUNTER(hobj->uart->hdmarx);
 129              		.loc 1 30 9 is_stmt 0 view .LVU26
 130 0022 FFF7FEFF 		bl	HAL_Delay
 131              	.LVL11:
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 4


  31:stm32_uart_dma.c ****         if (__last_find != __find)
 132              		.loc 1 31 9 is_stmt 1 view .LVU27
  31:stm32_uart_dma.c ****         if (__last_find != __find)
 133              		.loc 1 31 18 is_stmt 0 view .LVU28
 134 0026 A068     		ldr	r0, [r4, #8]
 135 0028 C36F     		ldr	r3, [r0, #124]
 136 002a 1B68     		ldr	r3, [r3]
 137 002c 5B68     		ldr	r3, [r3, #4]
  31:stm32_uart_dma.c ****         if (__last_find != __find)
 138              		.loc 1 31 16 view .LVU29
 139 002e 9BB2     		uxth	r3, r3
 140 0030 0A4A     		ldr	r2, .L5
 141 0032 1380     		strh	r3, [r2]
  32:stm32_uart_dma.c ****             return STM32_UART_DMA_OK;
 142              		.loc 1 32 9 is_stmt 1 view .LVU30
  32:stm32_uart_dma.c ****             return STM32_UART_DMA_OK;
 143              		.loc 1 32 25 is_stmt 0 view .LVU31
 144 0034 2A88     		ldrh	r2, [r5]
  32:stm32_uart_dma.c ****             return STM32_UART_DMA_OK;
 145              		.loc 1 32 12 view .LVU32
 146 0036 9342     		cmp	r3, r2
 147 0038 EED1     		bne	.L3
  34:stm32_uart_dma.c ****         hobj->rxcallback(hobj->rxbuf, hobj->rxbuf_max_size - __find);
 148              		.loc 1 34 9 is_stmt 1 view .LVU33
 149 003a FFF7FEFF 		bl	HAL_UART_Abort
 150              	.LVL12:
  35:stm32_uart_dma.c ****         HAL_UART_Receive_DMA(hobj->uart, hobj->rxbuf, hobj->rxbuf_max_size);
 151              		.loc 1 35 9 view .LVU34
  35:stm32_uart_dma.c ****         HAL_UART_Receive_DMA(hobj->uart, hobj->rxbuf, hobj->rxbuf_max_size);
 152              		.loc 1 35 43 is_stmt 0 view .LVU35
 153 003e A188     		ldrh	r1, [r4, #4]
  35:stm32_uart_dma.c ****         HAL_UART_Receive_DMA(hobj->uart, hobj->rxbuf, hobj->rxbuf_max_size);
 154              		.loc 1 35 9 view .LVU36
 155 0040 064B     		ldr	r3, .L5
 156 0042 1B88     		ldrh	r3, [r3]
 157 0044 C91A     		subs	r1, r1, r3
 158 0046 89B2     		uxth	r1, r1
 159 0048 2068     		ldr	r0, [r4]
 160 004a 6369     		ldr	r3, [r4, #20]
 161 004c 9847     		blx	r3
 162              	.LVL13:
  36:stm32_uart_dma.c ****     }
 163              		.loc 1 36 9 is_stmt 1 view .LVU37
 164 004e A288     		ldrh	r2, [r4, #4]
 165 0050 2168     		ldr	r1, [r4]
 166 0052 A068     		ldr	r0, [r4, #8]
 167 0054 FFF7FEFF 		bl	HAL_UART_Receive_DMA
 168              	.LVL14:
 169 0058 DEE7     		b	.L3
 170              	.L6:
 171 005a C046     		.align	2
 172              	.L5:
 173 005c 00000000 		.word	.LANCHOR0
 174 0060 00000000 		.word	.LANCHOR1
 175              		.cfi_endproc
 176              	.LFE298:
 178              		.section	.text.stm32_uart_dma_write,"ax",%progbits
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 5


 179              		.align	1
 180              		.global	stm32_uart_dma_write
 181              		.syntax unified
 182              		.code	16
 183              		.thumb_func
 185              	stm32_uart_dma_write:
 186              	.LVL15:
 187              	.LFB299:
  40:stm32_uart_dma.c **** stm32_uart_dma_state stm32_uart_dma_write(stm32_uart_dma *hobj, uint8_t *data, uint16_t len)
  41:stm32_uart_dma.c **** {
 188              		.loc 1 41 1 view -0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192              		.loc 1 41 1 is_stmt 0 view .LVU39
 193 0000 70B5     		push	{r4, r5, r6, lr}
 194              	.LCFI2:
 195              		.cfi_def_cfa_offset 16
 196              		.cfi_offset 4, -16
 197              		.cfi_offset 5, -12
 198              		.cfi_offset 6, -8
 199              		.cfi_offset 14, -4
 200 0002 0400     		movs	r4, r0
 201 0004 0D00     		movs	r5, r1
 202 0006 1600     		movs	r6, r2
  42:stm32_uart_dma.c ****     HAL_GPIO_WritePin(hobj->de_gpio, hobj->de_pin, GPIO_PIN_SET);
 203              		.loc 1 42 5 is_stmt 1 view .LVU40
 204 0008 018A     		ldrh	r1, [r0, #16]
 205              	.LVL16:
 206              		.loc 1 42 5 is_stmt 0 view .LVU41
 207 000a 0122     		movs	r2, #1
 208              	.LVL17:
 209              		.loc 1 42 5 view .LVU42
 210 000c C068     		ldr	r0, [r0, #12]
 211              	.LVL18:
 212              		.loc 1 42 5 view .LVU43
 213 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 214              	.LVL19:
  43:stm32_uart_dma.c ****     HAL_UART_Transmit(hobj->uart, data, len, HAL_MAX_DELAY);
 215              		.loc 1 43 5 is_stmt 1 view .LVU44
 216 0012 0123     		movs	r3, #1
 217 0014 5B42     		rsbs	r3, r3, #0
 218 0016 3200     		movs	r2, r6
 219 0018 2900     		movs	r1, r5
 220 001a A068     		ldr	r0, [r4, #8]
 221 001c FFF7FEFF 		bl	HAL_UART_Transmit
 222              	.LVL20:
  44:stm32_uart_dma.c ****     HAL_GPIO_WritePin(hobj->de_gpio, hobj->de_pin, GPIO_PIN_RESET);
 223              		.loc 1 44 5 view .LVU45
 224 0020 218A     		ldrh	r1, [r4, #16]
 225 0022 E068     		ldr	r0, [r4, #12]
 226 0024 0022     		movs	r2, #0
 227 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 228              	.LVL21:
  45:stm32_uart_dma.c ****     return STM32_UART_DMA_OK;
 229              		.loc 1 45 5 view .LVU46
  46:stm32_uart_dma.c **** }
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 6


 230              		.loc 1 46 1 is_stmt 0 view .LVU47
 231 002a 0020     		movs	r0, #0
 232              		@ sp needed
 233              	.LVL22:
 234              	.LVL23:
 235              		.loc 1 46 1 view .LVU48
 236 002c 70BD     		pop	{r4, r5, r6, pc}
 237              		.cfi_endproc
 238              	.LFE299:
 240              		.section	.text.stm32_uart_dma_delete_init,"ax",%progbits
 241              		.align	1
 242              		.global	stm32_uart_dma_delete_init
 243              		.syntax unified
 244              		.code	16
 245              		.thumb_func
 247              	stm32_uart_dma_delete_init:
 248              	.LVL24:
 249              	.LFB300:
  47:stm32_uart_dma.c **** stm32_uart_dma_state stm32_uart_dma_delete_init(stm32_uart_dma *hobj)
  48:stm32_uart_dma.c **** {
 250              		.loc 1 48 1 is_stmt 1 view -0
 251              		.cfi_startproc
 252              		@ args = 0, pretend = 0, frame = 0
 253              		@ frame_needed = 0, uses_anonymous_args = 0
 254              		.loc 1 48 1 is_stmt 0 view .LVU50
 255 0000 10B5     		push	{r4, lr}
 256              	.LCFI3:
 257              		.cfi_def_cfa_offset 8
 258              		.cfi_offset 4, -8
 259              		.cfi_offset 14, -4
  49:stm32_uart_dma.c ****     free(hobj->rxbuf);
 260              		.loc 1 49 5 is_stmt 1 view .LVU51
 261              		.loc 1 49 14 is_stmt 0 view .LVU52
 262 0002 0068     		ldr	r0, [r0]
 263              	.LVL25:
 264              		.loc 1 49 5 view .LVU53
 265 0004 FFF7FEFF 		bl	free
 266              	.LVL26:
  50:stm32_uart_dma.c ****     return STM32_UART_DMA_OK;
 267              		.loc 1 50 5 is_stmt 1 view .LVU54
  51:stm32_uart_dma.c **** }
 268              		.loc 1 51 1 is_stmt 0 view .LVU55
 269 0008 0020     		movs	r0, #0
 270              		@ sp needed
 271 000a 10BD     		pop	{r4, pc}
 272              		.cfi_endproc
 273              	.LFE300:
 275              		.global	__last_find
 276              		.global	__find
 277              		.section	.bss.__find,"aw",%nobits
 278              		.align	1
 279              		.set	.LANCHOR0,. + 0
 282              	__find:
 283 0000 0000     		.space	2
 284              		.section	.bss.__last_find,"aw",%nobits
 285              		.align	1
 286              		.set	.LANCHOR1,. + 0
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 7


 289              	__last_find:
 290 0000 0000     		.space	2
 291              		.text
 292              	.Letext0:
 293              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 294              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 295              		.file 4 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/stm32g031xx.h"
 296              		.file 5 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_def.h"
 297              		.file 6 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_gpio.h"
 298              		.file 7 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_dma.h"
 299              		.file 8 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_uart.h"
 300              		.file 9 "stm32_uart_dma.h"
 301              		.file 10 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
 302              		.file 11 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal.h"
 303              		.file 12 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_ll_dma.h"
ARM GAS  C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 stm32_uart_dma.c
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:18     .text.stm32_uart_dma_init:00000000 $t
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:24     .text.stm32_uart_dma_init:00000000 stm32_uart_dma_init
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:74     .text.stm32_uart_dma_loop:00000000 $t
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:80     .text.stm32_uart_dma_loop:00000000 stm32_uart_dma_loop
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:173    .text.stm32_uart_dma_loop:0000005c $d
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:179    .text.stm32_uart_dma_write:00000000 $t
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:185    .text.stm32_uart_dma_write:00000000 stm32_uart_dma_write
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:241    .text.stm32_uart_dma_delete_init:00000000 $t
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:247    .text.stm32_uart_dma_delete_init:00000000 stm32_uart_dma_delete_init
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:289    .bss.__last_find:00000000 __last_find
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:282    .bss.__find:00000000 __find
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:278    .bss.__find:00000000 $d
C:\Users\Xusniyor\AppData\Local\Temp\ccDbAiD5.s:285    .bss.__last_find:00000000 $d

UNDEFINED SYMBOLS
malloc
HAL_GPIO_WritePin
HAL_UART_Receive_DMA
HAL_Delay
HAL_UART_Abort
HAL_UART_Transmit
free
